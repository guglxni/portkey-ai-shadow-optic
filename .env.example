# Shadow-Optic Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Required API Keys
# =============================================================================

# Portkey API Key (from https://app.portkey.ai/api-keys)
# This is the ONLY LLM API key you need!
# All LLM calls (production, challengers, evaluations) route through Portkey.
PORTKEY_API_KEY=your_portkey_api_key_here

# NOTE: You do NOT need a separate OPENAI_API_KEY!
# DeepEval is configured to route through Portkey's gateway.
# Provider API keys are stored in Model Catalog (see dashboard).

# =============================================================================
# Portkey Model Catalog Configuration (v2.1)
# =============================================================================
# Model Catalog replaces Virtual Keys with a simpler @provider/model syntax.
# Configure providers at: https://app.portkey.ai/model-catalog

# Config IDs (auto-generated by bootstrap_portkey.py)
# Run: python scripts/bootstrap_portkey.py to generate these
PORTKEY_PRODUCTION_CONFIG_ID=
PORTKEY_SHADOW_CONFIG_ID=

# =============================================================================
# Portkey Workspaces (Enterprise Feature - Optional)
# =============================================================================
# Workspaces provide cost segregation and RBAC.
# Configure at: https://app.portkey.ai/workspaces

# Production workspace for main traffic
PORTKEY_PRODUCTION_WORKSPACE_ID=

# Shadow workspace for challenger testing (with budget limits)
PORTKEY_SHADOW_WORKSPACE_ID=

# =============================================================================
# Virtual Model Names (Enterprise Feature - Optional)
# =============================================================================
# Virtual Models are named aliases for Model Catalog entries.
# Create at: https://app.portkey.ai/model-catalog
#
# Production Virtual Models:
#   prod-primary     → @openai/gpt-5.2
#   prod-fallback    → @anthropic/claude-sonnet-4.5
#
# Shadow Virtual Models:
#   shadow-challenger-1 → @openai/gpt-5-mini
#   shadow-challenger-2 → @anthropic/claude-haiku-4.5
#   shadow-challenger-3 → @google/gemini-2.5-flash

# =============================================================================
# Temporal Configuration
# =============================================================================

# Temporal server address
TEMPORAL_ADDRESS=localhost:7233

# Temporal namespace
TEMPORAL_NAMESPACE=shadow-optic

# =============================================================================
# Qdrant Configuration
# =============================================================================

# Qdrant server host
QDRANT_HOST=localhost

# Qdrant server port
QDRANT_PORT=6333

# Qdrant API key (optional, for Qdrant Cloud)
# QDRANT_API_KEY=your_qdrant_api_key

# =============================================================================
# Observability
# =============================================================================

# Phoenix server URL (optional)
PHOENIX_COLLECTOR_ENDPOINT=http://localhost:6006

# OTLP exporter endpoint (optional)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# =============================================================================
# Application Configuration
# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Shadow testing budget per run (USD)
SHADOW_BUDGET_PER_RUN=50.0

# Optimization schedule (cron expression)
OPTIMIZATION_SCHEDULE=0 2 * * *

# =============================================================================
# Model Configuration
# =============================================================================

# Production model
PRODUCTION_MODEL=gpt-5.2

# Challenger models (comma-separated) - Latest as of Jan 2026
CHALLENGER_MODELS=deepseek-chat,gemini-3-flash,haiku-4.5,sonnet-4.5

# =============================================================================
# Quality Thresholds
# =============================================================================

# Minimum faithfulness score (0-1)
FAITHFULNESS_THRESHOLD=0.80

# Minimum quality score (0-1)
QUALITY_THRESHOLD=0.70

# Minimum conciseness score (0-1)
CONCISENESS_THRESHOLD=0.50

# Maximum refusal rate increase (0-1)
REFUSAL_RATE_THRESHOLD=0.01
